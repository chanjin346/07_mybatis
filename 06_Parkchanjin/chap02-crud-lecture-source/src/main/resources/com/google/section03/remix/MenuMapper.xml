<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

    <!--
        Mapper Interface와 Mapper XML을 연동하는 방법
        1. 인터페이스(java폴더)와 XML(resources)이 동일한 경로에 같은 이름으로 존재해야함
        2. 인터페이스의 풀 네임(패키지명+인터페이스명)을 namespace에 작성
        3. 인터페이스의 메서드명과 XML의 SQL id와 return type을 동일하게 작성
     -->

<mapper namespace="com.google.section03.remix.MenuMapper">

    <select id="selectAllMenu" resultType="MenuDTO">
        SELECT
            menu_code,
            menu_name,
            menu_price,
            category_code,
            orderable_status
        FROM
            tbl_menu
        WHERE
            orderable_status = 'Y'
        ORDER BY
            menu_code ASC
    </select>

    <!-- 메뉴 코드가 일치하는 메뉴 조회 -->
    <!--
        전달 받은 파라미터의 이름 #{} 내부에 작성하면
        해당 위치에 해당 값이 대입된다.

        - 파라미터가 기본 자료형인 경우
            -> #{} 내부 명칭 관계 없이 무조건 대입됨

        - 파라미터가 객체 타입인 경우
            -> #{} 내부 명칭을 필드명 또는 Key 값과 일치 시켜야 알맞게 대입된다
    -->
    <select id = "selectMenuByMenuCode" resultType="MenuDTO">
        SELECT
            menu_code,
            menu_name,
            menu_price,
            category_code,
            orderable_status
        FROM
            tbl_menu
        WHERE
            menu_code = #{menuCode}
    </select>

    <insert id="insertMenu" parameterType="MenuDTO">
        INSERT INTO tbl_menu(
            menu_name,
            menu_price,
            category_code,
            orderable_status)
        VALUES(
            #{menuName},
            #{menuPrice},
            #{categoryCode},
            'Y'
        )
    </insert>

    <update id="updateMenu" parameterType="MenuDTO">
            UPDATE tbl_menu
            SET menu_name = #{ menuName }
            , menu_price = #{ menuPrice }
            , category_code = #{ categoryCode }
            WHERE menu_code = #{ menuCode }
    </update>

    <!-- parameterType은 optional(선택적) 속성으로
         작성되지 않으면 Mybatis의 TypeHandler가 알아서 추론함
    -->
    <delete id="deleteMenu">
        DELETE
        FROM
            tbl_menu
        WHERE
            menu_code = #{ menuCode }
    </delete>
</mapper>